pico-8 cartridge // http://www.pico-8.com
version 18
__lua__
px = 73
py = 66 
lx1=32
ly1=127
lx2=127
ly2=0

obstacle= {grounded=false,
ox=0,oy=0} 

jumping = false
first_jump_avail = false
double_jump_avail = false

function _init()
grounded = false
g=0.1
pvelocity= {pvx=0,pvy=g}
end

function _draw()
cls()

print(grounded)
circfill(px,py, 1,3)
--draw mountain
line(lx1,ly1,lx2,ly2,6)
--[[for j=0, 127 do
 for i=0,127 do
  if(pget(i,j)==6) then
  pset(i+1,j,6)
  end
 end
end--]]
end

function check_collision()
 if(pget(px+1,py+1)==6) then
 grounded=true
 first_jump_avail=true
 second_jump_avail=false
 pvelocity.pvx=0
 pvelocity.pvy=0
 else 
 grounded=false 
 pvelocity.pvy+=g
 py+=pvelocity.pvy
 end
end

function _input()
 if(btnp(2)and grounded) then
 jump(first_jump_avail)
 grounded = false
 first_jump_avail=false
 second_jump_avail=true
 elseif(btnp(2)
 and second_jump_avail)
 then
 jump(first_jump_avail)
 first_jump_avail=false
 second_jump_avail=false
 end
end


function _update()
check_collision()
_input()
if(grounded) slide()
end

function spawn_obstacles()


end

--only set gravity while jumping
function jump(is_first)
pvelocity.pvy += g
 if(is_first)then
  pvelocity.pvy-=2
 else
 pvelocity.pvx+=1
 pvelocity.pvy+=0.5
 end
px+=pvelocity.pvx
py+=pvelocity.pvy
end

function slide()
 px-=1
 py+=1
 if(pget(px+1,py)==3)
 then

 end

end


__gfx__
00000000000000060066666600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000660666666600000006000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000006646666666600000066000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000770000000664b6666666600000666000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000664b46666666600000666000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070000664bbb6666666600006666000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000664444b6666666600066666000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000006644bb446666666600666666000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
1414141414140000000000001405141400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1414141414100000060600140505051400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000101010140606060603050505141400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000031010031406060302050505141400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0014021003021406030204051400141400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0010100302140603021414000014001400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0010101414140602141414000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010060614140600140014141400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000614000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
